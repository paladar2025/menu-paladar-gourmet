<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Paladar Gourmet | Menú Digital</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Montserrat", sans-serif;
        background-color: #000000;
        color: white;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2rem 1.5rem;
      }

      /* --- BOTONES DEL MENÚ PRINCIPAL --- */
      .category-btn {
        display: block;
        width: 100%;
        border: 1px solid #ffffff;
        border-radius: 8px;
        padding: 14px 0;
        margin-bottom: 12px;
        background-color: transparent;
        color: #ffffff;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .category-btn:hover,
      .category-btn:active {
        background-color: #ecc63d;
        color: #ffffff;
        border-color: #ecc63d;
        font-weight: 600;
        transform: scale(1.02);
      }

      /* Contenedor Responsive */
      .menu-container {
        width: 100%;
        max-width: 400px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .logo-img {
        animation: fadeIn 1s ease-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Ocultar scrollbar pero permitir deslizar */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
    </style>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-JHHQ0GR1NX"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-JHHQ0GR1NX");
    </script>
  </head>
  <body>
    <main class="menu-container">
      <div class="flex justify-center mb-4 w-full">
        <img
          src="logo.png"
          alt="Logo Paladar Gourmet"
          class="logo-img w-40 h-40 object-contain drop-shadow-2xl"
        />
      </div>

      <h1
        class="text-[#ECC63D] text-xl tracking-[0.4em] font-light mb-8 mt-4 border-b border-gray-800 pb-2 uppercase"
      >
        Menú
      </h1>

      <button onclick="showCategory('Entradas')" class="category-btn">
        - Entradas -
      </button>
      <button onclick="showCategory('Postres')" class="category-btn">
        - Postres -
      </button>
      <button onclick="showCategory('Pizzas')" class="category-btn">
        - Pizzas -
      </button>
      <button onclick="showCategory('Lasagnas')" class="category-btn">
        - Lasagnas -
      </button>
      <button onclick="showCategory('Pastas')" class="category-btn">
        - Pastas -
      </button>
      <button onclick="showCategory('Perros Calientes')" class="category-btn">
        - Perros Calientes -
      </button>
      <button onclick="showCategory('Hamburguesas')" class="category-btn">
        - Hamburguesas -
      </button>
      <button onclick="showCategory('Mazorcadas')" class="category-btn">
        - Mazorcadas -
      </button>
      <button onclick="showCategory('Asados')" class="category-btn">
        - Asados -
      </button>
      <button onclick="showCategory('Salchipapas')" class="category-btn">
        - Salchipapas -
      </button>
      <button onclick="showCategory('Bebidas')" class="category-btn">
        - Bebidas -
      </button>
      <button onclick="showCategory('Adicionales')" class="category-btn">
        - Adicionales -
      </button>

      <div class="flex justify-center gap-8 mt-8 mb-12 opacity-80">
        <a
          href="https://www.facebook.com/profile.php?id=61564303471588&locale=es_LA"
          target="_blank"
          aria-label="Facebook"
        >
          <svg
            class="w-7 h-7 fill-white hover:fill-[#ECC63D] transition cursor-pointer transform hover:scale-110"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.34 11.93 5.96 14.15 5.96C15.21 5.96 16.12 6.04 16.12 6.04V8.51H15.01C13.77 8.51 13.38 9.28 13.38 10.07V12.06H16.16L15.72 14.96H13.38V21.96C18.16 21.21 21.82 17.06 21.82 12.06C21.82 6.53 17.32 2.04 12 2.04Z"
            />
          </svg>
        </a>
        <a
          href="https://www.instagram.com/paladar7441/"
          target="_blank"
          aria-label="Instagram"
        >
          <svg
            class="w-7 h-7 fill-white hover:fill-[#ECC63D] transition cursor-pointer transform hover:scale-110"
            viewBox="0 0 24 24"
          >
            <path
              d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"
            />
          </svg>
        </a>
        <a
          href="https://www.tiktok.com/@paladar28"
          target="_blank"
          aria-label="TikTok"
        >
          <svg
            class="w-7 h-7 fill-white hover:fill-[#ECC63D] transition cursor-pointer transform hover:scale-110"
            viewBox="0 0 24 24"
          >
            <path
              d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"
            />
          </svg>
        </a>
      </div>
    </main>

    <div
      id="view-products"
      class="hidden fixed inset-0 bg-black text-white z-50 flex flex-col"
    >
      <div class="w-full bg-black z-50 shadow-2xl border-b border-gray-900">
        <div class="max-w-md mx-auto p-6 pb-2">
          <button
            onclick="showHome()"
            class="mb-4 text-white font-bold text-xs tracking-widest border border-white px-4 py-2 rounded uppercase hover:bg-[#ECC63D] hover:text-white hover:border-[#ECC63D] transition"
          >
            ← Volver
          </button>
          <h2
            id="current-category-name"
            class="text-3xl font-serif text-[#ECC63D] mb-4"
          ></h2>
          <div id="sticky-nav-container"></div>
        </div>
      </div>
      <div
        id="scroll-container"
        class="flex-1 overflow-y-auto no-scrollbar relative w-full"
      >
        <div class="max-w-md mx-auto p-6 pt-4 pb-32">
          <div id="product-list" class="space-y-6">
            <p class="text-center text-gray-500 italic">Cargando...</p>
          </div>
        </div>
      </div>
    </div>

    <a
      href="https://wa.me/573212378778?text=Hola%20Paladar%20Gourmet,%20quisiera%20realizar%20un%20pedido!"
      target="_blank"
      onclick="gtag('event', 'clic_whatsapp', { ubicacion: 'boton_flotante' })"
      class="fixed bottom-6 right-6 z-[60] animate-bounce-slow"
    >
      <div
        class="bg-[#25D366] w-14 h-14 rounded-full flex items-center justify-center shadow-[0_0_15px_rgba(37,211,102,0.5)] hover:scale-110 transition-transform cursor-pointer border-2 border-white"
      >
        <svg
          class="w-8 h-8 fill-white"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"
          />
        </svg>
      </div>
    </a>

    <script>
      let menuData = [];

      async function fetchMenu() {
        try {
          const response = await fetch("menu.json");
          const data = await response.json();
          menuData = data.products;
        } catch (error) {
          console.error("Error cargando JSON:", error);
        }
      }

      // --- SCROLL AJUSTADO PARA ESTRUCTURA FIJA ---
      function scrollToSection(id) {
        const element = document.getElementById(id);
        if (element) {
          const scrollContainer = document.getElementById("scroll-container");
          const topPos = element.offsetTop - 20;
          scrollContainer.scrollTo({ top: topPos, behavior: "smooth" });
        }
      }

      function showCategory(categoryName) {
        gtag("event", "ver_categoria", {
          nombre_categoria: categoryName,
        });
        const productsView = document.getElementById("view-products");
        const scrollContainer = document.getElementById("scroll-container");
        const container = document.getElementById("product-list");
        const navContainer = document.getElementById("sticky-nav-container");
        const title = document.getElementById("current-category-name");

        productsView.classList.remove("hidden");
        scrollContainer.scrollTop = 0;

        title.innerText = categoryName;
        container.innerHTML = "";
        navContainer.innerHTML = "";

        const filteredProducts = menuData.filter(
          (item) => item.category === categoryName,
        );

        if (filteredProducts.length === 0) {
          container.innerHTML =
            '<p class="text-center text-gray-500 italic mt-10">Selección no disponible.</p>';
          return;
        }

        // --- NAVEGACIÓN (GRID FIJA) ---
        const subcategories = [
          ...new Set(
            filteredProducts.map((p) => p.subcategory).filter(Boolean),
          ),
        ];

        if (subcategories.length > 0) {
          let navHTML = `
                    <div class="w-full mt-2">
                        <div class="grid grid-cols-2 gap-3"> 
                `;
          subcategories.forEach((sub) => {
            navHTML += `
                        <button onclick="scrollToSection('sec-${sub.replace(/\s+/g, "-")}')" 
                                class="w-full text-[10px] uppercase tracking-widest font-bold text-gray-400 hover:text-[#ECC63D] focus:text-[#ECC63D] border border-gray-700 rounded px-2 py-3 transition-all hover:border-[#ECC63D] bg-black/50">
                            ${sub}
                        </button>
                    `;
          });
          navHTML += `</div></div>`;
          navContainer.innerHTML = navHTML;
        }

        let currentSubcategory = "";

        filteredProducts.forEach((product) => {
          // ANCLAS DE SECCIÓN
          if (
            product.subcategory &&
            product.subcategory !== currentSubcategory
          ) {
            currentSubcategory = product.subcategory;
            container.innerHTML += `
                        <div id="sec-${currentSubcategory.replace(/\s+/g, "-")}" class="pt-8 mb-6 text-center">
                            <h3 class="text-[#ECC63D] text-sm font-serif italic border-b border-[#ECC63D] inline-block px-4 pb-1">
                                ${currentSubcategory}
                            </h3>
                        </div>
                    `;
          }

          // PRECIOS
          let priceHTML = "";
          let comboNote = "";

          if (product.prices) {
            let pricesList = Object.entries(product.prices)
              .map(([size, value]) => {
                return `<div class="flex flex-col items-center">
                                    <span class="text-[9px] text-gray-500 uppercase tracking-widest mb-1">${size}</span>
                                    <span class="text-white font-bold text-sm">$${value.toLocaleString("es-CO")}</span>
                                </div>`;
              })
              .join('<div class="w-[1px] h-6 bg-gray-800 mx-3"></div>');

            priceHTML = `<div class="flex justify-start items-center mt-3 pt-3 border-t border-gray-900">
                                    ${pricesList}
                                 </div>`;

            // --- DETECTAR COMBO Y CREAR NOTA ---
            if (product.prices.hasOwnProperty("Combo")) {
              comboNote = `
                            <div class="text-left mt-2"> 
                                <span class="text-[#ECC63D] text-[10px] font-bold tracking-wider uppercase">En combo:</span>
                                <span class="text-white text-[10px] font-light tracking-wide">Papas + Gaseosa</span>
                            </div>
                        `;
            }
          } else {
            priceHTML = `<span class="text-white font-medium text-lg whitespace-nowrap absolute right-0 top-0">
                                    $${product.price.toLocaleString("es-CO")}
                                 </span>`;
          }

          // TARJETA
          const card = `
                    <div class="mb-8 pb-4 border-b border-gray-900 last:border-0 relative">
                        <div class="${product.prices ? "" : "pr-24"}">
                            <h3 class="text-[#ECC63D] font-bold text-base tracking-wider uppercase mb-1">
                                ${product.name}
                            </h3>
                            ${!product.prices ? priceHTML : ""}
                        </div>
                        
                        <p class="text-gray-400 text-sm font-light leading-relaxed">
                            ${product.description}
                        </p>

                        ${product.prices ? priceHTML : ""}
                        
                        ${comboNote}
                    </div>
                `;
          container.innerHTML += card;
        });

        if (categoryName === "Adicionales") {
          container.innerHTML += `
                <div class="mt-6 mb-10 p-4 border border-dashed border-[#ECC63D]/30 rounded-lg bg-[#ECC63D]/5">
                    <p class="text-[#ECC63D] text-xs italic text-center leading-relaxed">
                        <span class="font-bold uppercase tracking-wider block mb-1">Nota:</span>
                        Para la pizza, el valor de la adición cuesta el doble del precio listado.
                    </p>
                </div>
            `;
        }
      }

      function showHome() {
        document.getElementById("view-products").classList.add("hidden");
      }

      fetchMenu();
    </script>
  </body>
</html>
